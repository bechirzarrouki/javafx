<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<GridPane alignment="CENTER" prefHeight="500" prefWidth="500" stylesheets="style.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Controllers.InvestmentController">

    <!-- Configuration des colonnes -->
    <columnConstraints>
        <ColumnConstraints maxWidth="200" minWidth="200" prefWidth="200" />
        <ColumnConstraints hgrow="ALWAYS" />
    </columnConstraints>

    <!-- Configuration des lignes -->
    <rowConstraints>
        <RowConstraints vgrow="ALWAYS" />
    </rowConstraints>

    <!-- Sidebar (colonne de gauche) -->
    <fx:include source="sidebar.fxml" GridPane.columnIndex="0" GridPane.rowIndex="0" />

    <!-- Contenu principal (colonne de droite) -->
    <BorderPane GridPane.columnIndex="1" GridPane.rowIndex="0">
        <!-- Navbar fixée en haut -->
        <top>
            <fx:include source="navbar.fxml" />
        </top>

        <!-- Contenu scrollable et centré -->
        <center>
            <ScrollPane fitToWidth="true" style="-fx-background: transparent;" pannable="true">
                <content>
                    <VBox spacing="20" style="-fx-padding: 20;">

                        <!-- Section de création d'investissement -->
                        <VBox maxWidth="500.0" spacing="18" style="-fx-padding: 25; -fx-background-radius: 15;" styleClass="investment-box">
                            <Label styleClass="title-label" text="Create Your Investment" />
                            <TextField fx:id="contentField" promptText="What do you have in your mind ?" styleClass="input-style" />
                            <VBox spacing="10">
                                <Label styleClass="subtitle-label" text="Selected Type:" />
                                <HBox alignment="CENTER" spacing="10.0">
                                    <Button onAction="#openTypeModal" styleClass="choose-type-btn" text="Choose Investment Type" />
                                    <Button onAction="#submitInvestment" styleClass="action-btn" text="Post Investment" />
                                </HBox>
                            </VBox>
                        </VBox>

                        <!-- Modal de sélection de type -->
                        <VBox fx:id="typeModal" spacing="10" styleClass="modal-overlay" visible="false">
                            <VBox alignment="CENTER" spacing="15" styleClass="modal-container" style="-fx-pref-width: 600px;">
                                <Label styleClass="modal-title" text="Select Investment Type" />
                                <ListView fx:id="typeList" prefHeight="200" prefWidth="350" styleClass="styled-list-view">
                                    <items>
                                        <FXCollections fx:factory="observableArrayList">
                                            <String fx:value="Stocks" />
                                            <String fx:value="Bonds" />
                                            <String fx:value="Real Estate" />
                                            <String fx:value="Crypto" />
                                        </FXCollections>
                                    </items>
                                </ListView>
                                <HBox alignment="CENTER_RIGHT" spacing="15">
                                    <Button onAction="#submitType" styleClass="modal-confirm-btn" text="Confirm" />
                                    <Button onAction="#closeTypeModal" styleClass="modal-cancel-btn" text="Cancel" />
                                </HBox>
                            </VBox>
                        </VBox>

                        <!-- Conteneur des investissements -->
                        <VBox fx:id="investmentContainer" spacing="20" />

                    </VBox>
                </content>
            </ScrollPane>
        </center>

    </BorderPane>
</GridPane>
